<!DOCTYPE html>

<html>
<head>
  <title>Rescue</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>

      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">


                <a class="source" href="compile.js.html">
                  compile.js
                </a>


                <a class="source" href="error.js.html">
                  error.js
                </a>


                <a class="source" href="find.js.html">
                  find.js
                </a>


                <a class="source" href="parse.js.html">
                  parse.js
                </a>


                <a class="source" href="prune.js.html">
                  prune.js
                </a>


                <a class="source" href="rescue.js.html">
                  rescue.js
                </a>


                <a class="source" href="readme.t.js.html">
                  readme.t.js
                </a>


                <a class="source" href="tree.js.html">
                  tree.js
                </a>

            </div>
          </div>
        </li>
      </ul>

    <ul class="sections">



        <li id="section-1">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="rescue">Rescue</h1>

            </div>

        </li>


        <li id="section-2">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="adovacy">Adovacy</h2>

            </div>

        </li>


        <li id="section-3">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Rescue will catch an eception or rethrow it. It can be used as a stand-in for
the catch-by-type facility found in other languages. In addition to catching
by type you can catch by message, properties, or the types and properties of
nested messages in an aggregate error.</p>

            </div>

        </li>


        <li id="section-4">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>I use rescue because I use code coverage to drive my testing and testing to
drive my development. When I’m done with a module I want to have 100% code
coverage. Exceptions, however, can be difficult to cover. Catch blocks are
not difficult to test for the case where you handle the caught exception.
This is an error you’re expecting, so you can probably get your test
environment into an expected error state.</p>

            </div>

        </li>


        <li id="section-5">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Catch blocks are difficult to test for the exceptions you’re not expecting.
In JavaScript a catch block cannot filter the type of exception to catch. It
must catch all exceptions. Every catch blocks that handles an exception,
truly handles, and attempts to recover, must also have throw statement to
rethrow the excpetion if it not the correct type.</p>

            </div>

        </li>


        <li id="section-6">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Rescue also helps you when handling nested exceptions. You’re able to express
search patterns to find nested exceptions. If the message you want to handle
has been wrapped by a module along the call stack, you do not have to
navigate into <code>errors</code> properties knowing the depth of originating message.</p>

            </div>

        </li>


        <li id="section-7">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Rescue allows you to write a clean catch block without conditionals,
extensive dereferencing or an explicit rethrow.</p>

            </div>

        </li>


        <li id="section-8">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="running-the-readme">Running the Readme</h2>

            </div>

        </li>


        <li id="section-9">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>This readme document is a unit test from the Rescue source code. It uses the
<a href="https://github.com/bigeasy/proof">Proof</a> unit test framework. We’ll be using
the <code>okay</code> method from Proof to assert the points we make about Rescue.</p>

            </div>

        </li>


        <li id="section-10">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Please run this test yourself.</p>
<pre><code class="language-text">git clone git@github.com:bigeasy/interrupt.git
cd interrupt
npm install --no-package-lock --no-save
node test/readme.t.js</code></pre>
<p>Out unit test begins here.</p>

            </div>

        </li>


        <li id="section-11">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;proof&#x27;</span>)(<span class="hljs-number">33</span>, <span class="hljs-function"><span class="hljs-params">okay</span> =&gt;</span> {</pre></div></div>

        </li>


        <li id="section-12">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>We are going to use Node.js assert to make sure we do not overshoot a
line that should have raised an exception.</p>

            </div>

        </li>


        <li id="section-13">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;assert&#x27;</span>)</pre></div></div>

        </li>


        <li id="section-14">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-15">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>To use Rescue install it from NPM using the following.</p>
<pre><code class="language-text">npm install rescue</code></pre>
<p>Then you can begin to use it in your code as follows.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> rescue = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;rescue&#x27;</span>)</code></pre>
<p>But here, because we’re in our project directory, we require Rescue by
requiring the root of the project.</p>

            </div>

        </li>


        <li id="section-16">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">const</span> rescue = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;..&#x27;</span>)</pre></div></div>

        </li>


        <li id="section-17">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-18">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>This example will catch any error that is an <code>Error</code> and not any other
Object type or JavaScript primitive.</p>

            </div>

        </li>


        <li id="section-19">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;thrown&#x27;</span>)
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> { code, <span class="hljs-attr">errors</span>: [ caught ] } = rescue(error, [ <span class="hljs-built_in">Error</span> ])
        okay(code, <span class="hljs-string">&#x27;rescue&#x27;</span>, <span class="hljs-string">&#x27;default rescued code&#x27;</span>)
        okay(caught.message, <span class="hljs-string">&#x27;thrown&#x27;</span>, <span class="hljs-string">&#x27;rescued object&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-20">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-21">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>When you catch an error you receive a <code>Rescue</code> object. The object has a
<code>code</code> which is <code>rescue</code> by default. It also has an array of all the
errors that matched the pattern. Using destructuring you can easily get a
single error into a variable.</p>

            </div>

        </li>


        <li id="section-22">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>If the pattern does not match, rescue rethrows the exception.</p>

            </div>

        </li>


        <li id="section-23">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;flung&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-string">&#x27;thrown&#x27;</span> ])
            assert(<span class="hljs-literal">false</span>)
        }
    } <span class="hljs-keyword">catch</span> (error) {
        okay(error.message, <span class="hljs-string">&#x27;flung&#x27;</span>, <span class="hljs-string">&#x27;exception was not rescued&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-24">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-25">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>In the above example we tried to catch for message type.</p>

            </div>

        </li>


        <li id="section-26">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>To catch an error my message you use a String. Put a string in your
pattern and it will be matched against the message property of the
<code>Error</code>.</p>

            </div>

        </li>


        <li id="section-27">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;thrown&#x27;</span>)
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> { code, <span class="hljs-attr">errors</span>: [ caught ] } = rescue(error, [ <span class="hljs-string">&#x27;thrown&#x27;</span> ])
        okay(code, <span class="hljs-string">&#x27;rescue&#x27;</span>, <span class="hljs-string">&#x27;catch by message default rescue code&#x27;</span>)
        okay(caught.message, <span class="hljs-string">&#x27;thrown&#x27;</span>, <span class="hljs-string">&#x27;catch by message caught error&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-28">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-29">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>When you specify a <code>String</code>, <code>rescue</code> will assume you mean to match an
<code>Error</code> and will only match objects of type `Error.</p>

            </div>

        </li>


        <li id="section-30">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> { <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;thrown&#x27;</span> }
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-string">&#x27;thrown&#x27;</span> ])
            assert(<span class="hljs-literal">false</span>)
        }
    } <span class="hljs-keyword">catch</span> (error) {
        okay(error, { <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;thrown&#x27;</span> }, <span class="hljs-string">&#x27;rescue assumed an error and asserted an error type&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-31">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-32">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>You can also match the message by a regular expression.</p>

            </div>

        </li>


        <li id="section-33">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;an exception was thrown&#x27;</span>)
    } <span class="hljs-keyword">catch</span> (error) {
        rescue(error, [ <span class="hljs-regexp">/thrown/</span> ])
        okay(<span class="hljs-string">&#x27;exeption caught by regular expression on message&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-34">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-35">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>You can match properties on an object by specifying them as an object
with a value to match. This will be a deep strict equality so you can
compare arrays and objects.</p>

            </div>

        </li>


        <li id="section-36">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;file not found&#x27;</span>)
        error.code = <span class="hljs-string">&#x27;ENOENT&#x27;</span>
        <span class="hljs-keyword">throw</span> error
    } <span class="hljs-keyword">catch</span> (error) {
        rescue(error, [ { <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;ENOENT&#x27;</span> } ])
        okay(<span class="hljs-string">&#x27;exception caught by property&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-37">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-38">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>You can also use a regular expression to match properties. The regular
expression will be applied to the <code>.toString()</code> value of the property.</p>

            </div>

        </li>


        <li id="section-39">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>You can only specify a regular expression at the top-most level. If you
nest a regular expression it will be compared using deep strict equal
as a part of the complex object.</p>

            </div>

        </li>


        <li id="section-40">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;file not found&#x27;</span>)
        error.code = <span class="hljs-string">&#x27;ENOENT&#x27;</span>
        <span class="hljs-keyword">throw</span> error
    } <span class="hljs-keyword">catch</span> (error) {
        rescue(error, [ { <span class="hljs-attr">code</span>: <span class="hljs-regexp">/ENOENT/</span> } ])
        okay(<span class="hljs-string">&#x27;exception caught by regular expression on a property&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-41">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-42">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>You can a subset of any property in an object. You can provide an object
and you’ll rescue the exception if a subset of that object exists in the
specified property.</p>

            </div>

        </li>


        <li id="section-43">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;file not found&#x27;</span>)
        error.state = { <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;ENOENT&#x27;</span>, <span class="hljs-attr">severity</span>: <span class="hljs-number">1</span> }
        <span class="hljs-keyword">throw</span> error
    } <span class="hljs-keyword">catch</span> (error) {
        rescue(error, [ { <span class="hljs-attr">state</span>: { <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;ENOENT&#x27;</span> } } ])
        okay(<span class="hljs-string">&#x27;exception caught by subset of property&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-44">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-45">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>The object you provide is a pattern to match. You can use regular
expressions at any depth in the pattern.</p>

            </div>

        </li>


        <li id="section-46">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;file not found&#x27;</span>)
        error.state = { <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;ENOENT&#x27;</span>, <span class="hljs-attr">severity</span>: <span class="hljs-number">1</span> }
        <span class="hljs-keyword">throw</span> error
    } <span class="hljs-keyword">catch</span> (error) {
        rescue(error, [ { <span class="hljs-attr">state</span>: { <span class="hljs-attr">code</span>: <span class="hljs-regexp">/ENOENT/</span> } } ])
        okay(<span class="hljs-string">&#x27;exception caught by subset of property&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-47">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-48">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>When <code>rescue</code> applies your pattern to the error it actually searches for
the error. If the error has an <code>errors</code> property, it will test those
errors for an error that matchs.</p>

            </div>

        </li>


        <li id="section-49">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;child&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
            wrapper.errors = [ error ]
            <span class="hljs-keyword">throw</span> wrapper
        }
    } <span class="hljs-keyword">catch</span> (error) {
        rescue(error, [ <span class="hljs-string">&#x27;child&#x27;</span> ])
        okay(<span class="hljs-string">&#x27;matched a wrapped error&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-50">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-51">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>If you do not want to search in depth you can specify a maximum depth to
search. Zero will test the only the root exception. An integer of zero or
greater will be interpreted as maxium depth.</p>

            </div>

        </li>


        <li id="section-52">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;child&#x27;</span>)
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
                wrapper.errors = [ error ]
                <span class="hljs-keyword">throw</span> wrapper
            }
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;parent&#x27;</span> ])
            okay(<span class="hljs-string">&#x27;match only at the current level&#x27;</span>)
            rescue(error, [ <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;child&#x27;</span> ])
            assert(<span class="hljs-literal">false</span>)
        }
    } <span class="hljs-keyword">catch</span> (error) {
        okay(error.message, <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-string">&#x27;did not search children&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-53">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-54">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>You can also specify a minimum depth to search. To do you you specify
both a minimum and maximum. They must both be integers of zero or
greater. The first integer is used for the minimum depth, the second
integer is used as the maxium depth.</p>

            </div>

        </li>


        <li id="section-55">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;child&#x27;</span>)
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
                wrapper.errors = [ error ]
                <span class="hljs-keyword">throw</span> wrapper
            }
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;child&#x27;</span> ])
            okay(<span class="hljs-string">&#x27;match at the second level&#x27;</span>)
            rescue(error, [ <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;parent&#x27;</span> ])
            assert(<span class="hljs-literal">false</span>)
        }
    } <span class="hljs-keyword">catch</span> (error) {
        okay(error.message, <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-string">&#x27;did match root error&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-56">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-57">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>If you want to start at a specific minimum but do not want to stop at any
particular maximum you can use <code>Infinity</code> for the maximum.</p>

            </div>

        </li>


        <li id="section-58">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;child&#x27;</span>)
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
                wrapper.errors = [ error ]
                <span class="hljs-keyword">throw</span> wrapper
            }
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-number">1</span>, <span class="hljs-literal">Infinity</span>, <span class="hljs-string">&#x27;child&#x27;</span> ])
            okay(<span class="hljs-string">&#x27;match at the second level infinate search&#x27;</span>)
            rescue(error, [ <span class="hljs-number">1</span>, <span class="hljs-literal">Infinity</span>, <span class="hljs-string">&#x27;parent&#x27;</span> ])
            assert(<span class="hljs-literal">false</span>)
        }
    } <span class="hljs-keyword">catch</span> (error) {
        okay(error.message, <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-string">&#x27;did match root error infinate search&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-59">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-60">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>You can specify a parent/child relationship. You can match parent
properties and child properties. When you specify <code>Error</code> in the pattern
it is partition. It indicates that you are specifying a match for a child.</p>

            </div>

        </li>


        <li id="section-61">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;child&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
            wrapper.errors = [ error ]
            <span class="hljs-keyword">throw</span> wrapper
        }
    } <span class="hljs-keyword">catch</span> (error) {
        rescue(error, [ <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-built_in">Error</span>, <span class="hljs-string">&#x27;child&#x27;</span> ])
        okay(<span class="hljs-string">&#x27;rescued a parent by message and a child by message&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-62">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-63">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>You can specify depths after a partition as well.</p>

            </div>

        </li>


        <li id="section-64">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;child&#x27;</span>)
                } <span class="hljs-keyword">catch</span> (error) {
                    <span class="hljs-keyword">const</span> interloper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;interloper&#x27;</span>)
                    interloper.errors = [ error ]
                    <span class="hljs-keyword">throw</span> interloper
                }
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
                wrapper.errors = [ error ]
                <span class="hljs-keyword">throw</span> wrapper
            }
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-built_in">Error</span>, <span class="hljs-string">&#x27;child&#x27;</span> ])
            okay(<span class="hljs-string">&#x27;rescued a parent by message and a child by message with no specified depth&#x27;</span>)
            rescue(error, [ <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-built_in">Error</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;child&#x27;</span> ])
            assert(<span class="hljs-literal">false</span>)
        }
    } <span class="hljs-keyword">catch</span> (error) {
        okay(error.message, <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-string">&#x27;did not rescue when child depth specified&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-65">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-66">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Rescue assumes you only want to match a single instance of the specified
exception. If you expect specific an number other than one you can
specify that number in an array as the first element in the pattern
array.</p>

            </div>

        </li>


        <li id="section-67">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;aggregate&#x27;</span>)
            error.errors = [ <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;thrown&#x27;</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;thrown&#x27;</span>) ]
            <span class="hljs-keyword">throw</span> error
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
            wrapper.errors = [ error ]
            <span class="hljs-keyword">throw</span> wrapper
        }
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> errors = rescue(error, [ [ <span class="hljs-number">2</span> ], <span class="hljs-string">&#x27;thrown&#x27;</span> ]).errors
        okay(errors.length, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;caught two errors&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-68">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-69">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>If you are expecting more than one error but don’t know exactly how many
you can use zero to match all of them.</p>

            </div>

        </li>


        <li id="section-70">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;aggregate&#x27;</span>)
            error.errors = [ <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;thrown&#x27;</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;thrown&#x27;</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;thrown&#x27;</span>) ]
            <span class="hljs-keyword">throw</span> error
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
            wrapper.errors = [ error ]
            <span class="hljs-keyword">throw</span> wrapper
        }
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> errors = rescue(error, [ [ <span class="hljs-number">0</span> ], <span class="hljs-string">&#x27;thrown&#x27;</span> ]).errors
        okay(errors.length, <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;caught all the errors&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-71">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-72">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p><code>rescue</code> will only match if there are no forks in the path to the
exception. If there are siblings (or cousins) to the exception you match,
<code>rescue</code> will rethrow the exception.</p>

            </div>

        </li>


        <li id="section-73">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;aggregate&#x27;</span>)
                error.errors = [ <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;first&#x27;</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;second&#x27;</span>) ]
                <span class="hljs-keyword">throw</span> error
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
                wrapper.errors = [ error ]
                <span class="hljs-keyword">throw</span> wrapper
            }
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-built_in">Error</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;aggregate&#x27;</span> ])
            okay(<span class="hljs-string">&#x27;caught before the fork in the path&#x27;</span>)
            rescue(error, [ <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-built_in">Error</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;aggregate&#x27;</span>, <span class="hljs-built_in">Error</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;first&#x27;</span> ])
            assert(<span class="hljs-literal">false</span>)
        }
    } <span class="hljs-keyword">catch</span> (error) {
        okay(error.message, <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-string">&#x27;did not catch exception because other forks in the path exist&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-74">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-75">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>If you want to match two different types of error you specify a fork
using an array as the last element of your pattern. The array contains
the separeate patterns to match at that point in the error tree.</p>

            </div>

        </li>


        <li id="section-76">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;aggregate&#x27;</span>)
            error.errors = [ <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;first&#x27;</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;second&#x27;</span>) ]
            <span class="hljs-keyword">throw</span> error
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
            wrapper.errors = [ error ]
            <span class="hljs-keyword">throw</span> wrapper
        }
    } <span class="hljs-keyword">catch</span> (error) {
        rescue(error, [ <span class="hljs-string">&#x27;aggregate&#x27;</span> ])
        okay(<span class="hljs-string">&#x27;caught before the fork in the path&#x27;</span>)
        rescue(error, [ <span class="hljs-string">&#x27;aggregate&#x27;</span>, [[ <span class="hljs-string">&#x27;first&#x27;</span> ], [ <span class="hljs-string">&#x27;second&#x27;</span> ]] ])
        okay(<span class="hljs-string">&#x27;rescued matching both children&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-77">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-78">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>Your fork must match all the different possible errors. If it doesn’t
than the exception is rethrown.</p>

            </div>

        </li>


        <li id="section-79">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p><strong>TODO</strong> As of yet, I have no way of specifying a partial match, to say,
yes I want to rescue if this exists and I dont’ care about anything else.
I am going to use Rescue as it is for a while and see if I don’t
encounter that use case before I implement it.</p>

            </div>

        </li>


        <li id="section-80">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;aggregate&#x27;</span>)
                error.errors = [ <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;first&#x27;</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;second&#x27;</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;third&#x27;</span>) ]
                <span class="hljs-keyword">throw</span> error
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;parent&#x27;</span>)
                wrapper.errors = [ error ]
                <span class="hljs-keyword">throw</span> wrapper
            }
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-string">&#x27;aggregate&#x27;</span>, [[ <span class="hljs-string">&#x27;first&#x27;</span> ], [ <span class="hljs-string">&#x27;second&#x27;</span> ]] ])
            okay(<span class="hljs-string">&#x27;rescued matching both children&#x27;</span>)
        }
    } <span class="hljs-keyword">catch</span> (error) {
        okay(error.message, <span class="hljs-string">&#x27;parent&#x27;</span>, <span class="hljs-string">&#x27;fork did not match all possible errors&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-81">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-82">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>If you would like to catch more than one type of exception, you pass an
object to <code>rescue</code>. Each property is a rescue pattern. Each property is
applied in the enumeration order of the object, which is going to be the
same as the declaration order in contemporary JavaScript. The first one
that matches is returned.</p>

            </div>

        </li>


        <li id="section-83">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>The result is an object with a <code>code</code> property that contains the property
name of the pattern that matched, and an <code>errors</code> property that is an
array of the errors that matched.</p>

            </div>

        </li>


        <li id="section-84">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>You can then use the <code>code</code> in a switch statement. This is starts to look
like the catch by type facility in other languages, with the added
benefit of being able to dive into exception trees and inspect the types
and properties of nested exceptions.</p>

            </div>

        </li>


        <li id="section-85">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Furthermore, this satisfies the original object of Rescue. If you unit
test the expected error paths, this catch block will be fully covered.</p>

            </div>

        </li>


        <li id="section-86">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;child&#x27;</span>)
        error.errors = [ <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;second&#x27;</span>) ]
        <span class="hljs-keyword">throw</span> error
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> { code, <span class="hljs-attr">errors</span>: [ caught ] } = rescue(error, {
            <span class="hljs-attr">first</span>: [ <span class="hljs-string">&#x27;child&#x27;</span>, <span class="hljs-built_in">Error</span>, <span class="hljs-string">&#x27;first&#x27;</span> ],
            <span class="hljs-attr">second</span>: [ <span class="hljs-string">&#x27;child&#x27;</span>, <span class="hljs-built_in">Error</span>, <span class="hljs-string">&#x27;second&#x27;</span> ]
        })
        <span class="hljs-keyword">switch</span> (code) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;first&#x27;</span>:
            assert(<span class="hljs-literal">false</span>)
            <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;second&#x27;</span>:
            okay(caught.message, <span class="hljs-string">&#x27;second&#x27;</span>, <span class="hljs-string">&#x27;matched alternative&#x27;</span>)
            <span class="hljs-keyword">break</span>
        }
    }</pre></div></div>

        </li>


        <li id="section-87">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-88">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Exceptions can be any type in JavaScript and rescue can catch any type of
exception. You specify a non-error exception by giving a constructor,
optional depth arguments, and then an optional value.</p>

            </div>

        </li>


        <li id="section-89">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Here is how you would catch an error that was a string.</p>

            </div>

        </li>


        <li id="section-90">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;thrown&#x27;</span>
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> string = rescue(error, [ <span class="hljs-built_in">String</span>, <span class="hljs-string">&#x27;thrown&#x27;</span> ]).errors.shift()
        okay(string, <span class="hljs-string">&#x27;thrown&#x27;</span>, <span class="hljs-string">&#x27;caught a string&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-91">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-92">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Similarly, you can catch a number by value.</p>

            </div>

        </li>


        <li id="section-93">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-number">1</span>
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> value = rescue(error, [ <span class="hljs-built_in">Number</span>, <span class="hljs-number">1</span> ]).errors.shift()
        okay(value, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;caught a number&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-94">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-95">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>You do not have to specify a value to catch by type. You can simply
specify the type.</p>

            </div>

        </li>


        <li id="section-96">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">throw</span> <span class="hljs-literal">false</span>
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> value = rescue(error, [ <span class="hljs-built_in">Boolean</span> ]).errors.shift()
        okay(value, <span class="hljs-literal">false</span>, <span class="hljs-string">&#x27;caught a boolean by type&#x27;</span>)
    }</pre></div></div>

        </li>


        <li id="section-97">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>

            </div>

        </li>


        <li id="section-98">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>You can catch symbols. You can specify these primitive types at any level
of the pattern.</p>

            </div>

        </li>


        <li id="section-99">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Symbol</span>.iterator
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;thrown&#x27;</span>)
            wrapper.errors = [ error ]
            <span class="hljs-keyword">throw</span> wrapper
        }
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> value = rescue(error, [ <span class="hljs-string">&#x27;thrown&#x27;</span>, <span class="hljs-built_in">Symbol</span>, <span class="hljs-built_in">Symbol</span>.iterator ]).errors.shift()
        okay(value, <span class="hljs-built_in">Symbol</span>.iterator, <span class="hljs-string">&#x27;catch symbol&#x27;</span>)
    }
})</pre></div></div>

        </li>

    </ul>
  </div>
</body>
</html>

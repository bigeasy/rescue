<!DOCTYPE html>

<html>
<head>
  <title>rescue.t.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>

      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">


                <a class="source" href="compile.js.html">
                  compile.js
                </a>


                <a class="source" href="find.js.html">
                  find.js
                </a>


                <a class="source" href="parse.js.html">
                  parse.js
                </a>


                <a class="source" href="prune.js.html">
                  prune.js
                </a>


                <a class="source" href="redux.js.html">
                  redux.js
                </a>


                <a class="source" href="rescue.js.html">
                  rescue.js
                </a>


                <a class="source" href="rescue.t.js.html">
                  rescue.t.js
                </a>


                <a class="source" href="readme.t.js.html">
                  readme.t.js
                </a>


                <a class="source" href="tree.js.html">
                  tree.js
                </a>

            </div>
          </div>
        </li>
      </ul>

    <ul class="sections">

          <li id="title">
              <div class="annotation">
                  <h1>rescue.t.js</h1>
              </div>
          </li>



        <li id="section-1">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;proof&#x27;</span>)(<span class="hljs-number">42</span>, <span class="hljs-keyword">async</span> (okay) =&gt; {
    <span class="hljs-keyword">const</span> Root = { <span class="hljs-attr">Error</span>: <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Error</span> </span>{} }
    <span class="hljs-keyword">const</span> Sought = { <span class="hljs-attr">Error</span>: <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Error</span> </span>{} }
    <span class="hljs-keyword">const</span> Other = { <span class="hljs-attr">Error</span>: <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Error</span> </span>{} }
    <span class="hljs-keyword">const</span> rescue = <span class="hljs-function"><span class="hljs-title">require</span>(<span class="hljs-params"><span class="hljs-string">&#x27;..&#x27;</span></span>)</span>
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Sought.Error(<span class="hljs-string">&#x27;error&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ Sought.Error ], <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(error.message))
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;error by type&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Sought.Error(<span class="hljs-string">&#x27;error&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            test.push(rescue(error, [ Sought.Error ], <span class="hljs-literal">true</span>))
        }
        okay(test, [ <span class="hljs-literal">true</span> ], <span class="hljs-string">&#x27;return value instead of calling a function&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Sought.Error(<span class="hljs-string">&#x27;error&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            test.push(rescue(error, [ Sought.Error ]))
        }
        okay(test, [ <span class="hljs-literal">undefined</span> ], <span class="hljs-string">&#x27;swallow errors&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Other.Error(<span class="hljs-string">&#x27;other&#x27;</span>)
            } <span class="hljs-keyword">catch</span> (error) {
                rescue(error, [ Sought.Error ])
            }
        } <span class="hljs-keyword">catch</span> (error) {
            test.push(error.message)
        }
        okay(test, [ <span class="hljs-string">&#x27;other&#x27;</span> ], <span class="hljs-string">&#x27;rethrow&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;root&#x27;</span>)
                error.causes = [ <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>) ]
                <span class="hljs-keyword">throw</span> error
            } <span class="hljs-keyword">catch</span> (error) {
                rescue(error, [ <span class="hljs-string">&#x27;error&#x27;</span> ])
            }
        } <span class="hljs-keyword">catch</span> (error) {
            test.push(error.message)
        }
        okay(test, [ <span class="hljs-string">&#x27;root&#x27;</span> ], <span class="hljs-string">&#x27;match only&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;root&#x27;</span>)
            error.causes = [ <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>) ]
            <span class="hljs-keyword">throw</span> error
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-string">&#x27;error&#x27;</span> ], [], <span class="hljs-function"><span class="hljs-params">errors</span> =&gt;</span> {
                errors.map(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(error.message))
            })
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span>, <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;match many&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
            error.causes = [ <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>) ]
            <span class="hljs-keyword">throw</span> error
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(!! error.causes))
        }
        okay(test, [ <span class="hljs-literal">false</span> ], <span class="hljs-string">&#x27;specific depth&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
            error.causes = [ <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>) ]
            <span class="hljs-keyword">throw</span> error
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span> ], <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(!! error.causes))
        }
        okay(test, [ <span class="hljs-literal">false</span> ], <span class="hljs-string">&#x27;match range of depth&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(error.message))
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;match error message&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-literal">true</span> ], <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(error.message))
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;arbitrary boolean true&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
            } <span class="hljs-keyword">catch</span> (error) {
                rescue(error, [ <span class="hljs-literal">false</span> ], <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(<span class="hljs-string">&#x27;unexpected&#x27;</span>))
            }
        } <span class="hljs-keyword">catch</span> (error) {
            test.push(error.message)
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;arbitrary boolean false&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-regexp">/^error$/</span> ], <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(error.message))
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;match error message by regex&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
            error.code = <span class="hljs-string">&#x27;ENOENT&#x27;</span>
            <span class="hljs-keyword">throw</span> error
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [{ <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;ENOENT&#x27;</span> }], <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(error.message))
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;match property&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
                error.code = <span class="hljs-string">&#x27;ENOENT&#x27;</span>
                <span class="hljs-keyword">throw</span> error
            } <span class="hljs-keyword">catch</span> (error) {
                rescue(error, [{ <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;EACCES&#x27;</span> }])
            }
        } <span class="hljs-keyword">catch</span> (error) {
            test.push(error.message)
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;mismatch property&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
            error.code = <span class="hljs-string">&#x27;ENOENT&#x27;</span>
            <span class="hljs-keyword">throw</span> error
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [{ <span class="hljs-attr">code</span>: <span class="hljs-regexp">/^ENOENT$/</span> }], <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(error.message))
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;match property by regex&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
                error.code = <span class="hljs-string">&#x27;ENOENT&#x27;</span>
                <span class="hljs-keyword">throw</span> error
            } <span class="hljs-keyword">catch</span> (error) {
                rescue(error, [{ <span class="hljs-attr">code</span>: <span class="hljs-regexp">/^EACCES$/</span> }])
            }
        } <span class="hljs-keyword">catch</span> (error) {
            test.push(error.message)
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;mismatch a property by regex&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">const</span> f = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-literal">true</span>
            f.prototype = <span class="hljs-number">1</span>
            rescue(error, [ f ], <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> test.push(error.message))
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;match on function&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Sought.Error(<span class="hljs-string">&#x27;sought&#x27;</span>)
            } <span class="hljs-keyword">catch</span> (inner) {
                <span class="hljs-keyword">const</span> outer = <span class="hljs-keyword">new</span> Root.Error(<span class="hljs-string">&#x27;root&#x27;</span>)
                outer.causes = [ inner ]
                <span class="hljs-keyword">throw</span> outer
            }
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ Sought.Error ], <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> test.push(error.message))
        }
        okay(test, [ <span class="hljs-string">&#x27;sought&#x27;</span> ], <span class="hljs-string">&#x27;dive for errors&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [[ [ <span class="hljs-number">0</span>, <span class="hljs-number">0</span> ], <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> test.push(error.message) ])
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;accept matches in an array&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [
                [ <span class="hljs-string">&#x27;other&#x27;</span> ], <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> { <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span> },
                [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> test.push(error.message)
            ])
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;accept multiple matches in an array&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">&#x27;a&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">debugger</span>
            rescue(error, [ <span class="hljs-built_in">RegExp</span>, <span class="hljs-string">&#x27;/a/&#x27;</span> ], <span class="hljs-function">(<span class="hljs-params">object</span>) =&gt;</span> test.push(<span class="hljs-built_in">String</span>(object)))
        }
        okay(test, [ <span class="hljs-string">&#x27;/a/&#x27;</span> ], <span class="hljs-string">&#x27;match toString value of an arbitrary object&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">&#x27;a&#x27;</span>)
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">debugger</span>
            rescue(error, [ <span class="hljs-built_in">RegExp</span>, <span class="hljs-regexp">/^\/a\/$/</span> ], <span class="hljs-function">(<span class="hljs-params">object</span>) =&gt;</span> test.push(<span class="hljs-built_in">String</span>(object)))
        }
        okay(test, [ <span class="hljs-string">&#x27;/a/&#x27;</span> ], <span class="hljs-string">&#x27;regex match a toString value of an arbitrary object&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-literal">true</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-built_in">Boolean</span> ], <span class="hljs-function">(<span class="hljs-params">b</span>) =&gt;</span> test.push(b))
        }
        okay(test, [ <span class="hljs-literal">true</span> ], <span class="hljs-string">&#x27;match boolean exception&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-literal">true</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-built_in">Boolean</span>, <span class="hljs-literal">true</span> ], <span class="hljs-function">(<span class="hljs-params">b</span>) =&gt;</span> test.push(b))
        }
        okay(test, [ <span class="hljs-literal">true</span> ], <span class="hljs-string">&#x27;match boolean exception by value&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-literal">false</span>
            } <span class="hljs-keyword">catch</span> (error) {
                rescue(error, [ <span class="hljs-built_in">Boolean</span>, <span class="hljs-literal">true</span> ])
            }
        } <span class="hljs-keyword">catch</span> (error) {
            test.push(error)
        }
        okay(test, [ <span class="hljs-literal">false</span> ], <span class="hljs-string">&#x27;mismatch boolean exception by value&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-number">1</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-built_in">Number</span> ], <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> test.push(n))
        }
        okay(test, [ <span class="hljs-number">1</span> ], <span class="hljs-string">&#x27;match number exception&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-number">1</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-built_in">Number</span>, <span class="hljs-number">1</span> ], <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> test.push(n))
        }
        okay(test, [ <span class="hljs-number">1</span> ], <span class="hljs-string">&#x27;match a number exception by value&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-number">1</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-built_in">Number</span>, [ <span class="hljs-number">0</span>, <span class="hljs-number">1</span> ] ], <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> test.push(n))
        }
        okay(test, [ <span class="hljs-number">1</span> ], <span class="hljs-string">&#x27;match a number exception by range&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;error&#x27;</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-built_in">String</span> ], <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> test.push(s))
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;match a string exception&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;error&#x27;</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-built_in">String</span>, <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> test.push(s))
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;match string exception by value&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;error&#x27;</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-built_in">String</span>, <span class="hljs-regexp">/^error$/</span> ], <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> test.push(n))
        }
        okay(test, [ <span class="hljs-string">&#x27;error&#x27;</span> ], <span class="hljs-string">&#x27;match string exception by regex&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-number">1n</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ BigInt ], <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> test.push(n))
        }
        okay(test, [ <span class="hljs-number">1n</span> ], <span class="hljs-string">&#x27;match a bigint exception&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-number">1n</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ BigInt, <span class="hljs-number">1n</span> ], <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> test.push(n))
        }
        okay(test, [ <span class="hljs-number">1n</span> ], <span class="hljs-string">&#x27;match a bigint exception by value&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-number">1n</span>
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ BigInt, [ <span class="hljs-number">0n</span>, <span class="hljs-number">1n</span> ] ], <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> test.push(n))
        }
        okay(test, [ <span class="hljs-number">1n</span> ], <span class="hljs-string">&#x27;match a bigint exception by range&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> [ <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span> ]
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-built_in">Array</span> ], <span class="hljs-function">(<span class="hljs-params">a</span>) =&gt;</span> test.push(a))
        }
        okay(test, [ [ <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span> ] ], <span class="hljs-string">&#x27;match an array exception&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">throw</span> [ <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span> ]
        } <span class="hljs-keyword">catch</span> (error) {
            rescue(error, [ <span class="hljs-built_in">Array</span>, [ <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span> ] ], <span class="hljs-function">(<span class="hljs-params">a</span>) =&gt;</span> test.push(a))
        }
        okay(test, [ [ <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span> ] ], <span class="hljs-string">&#x27;match an array exception by shallow compare&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> test = []
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">throw</span> [ <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span> ]
            } <span class="hljs-keyword">catch</span> (error) {
                rescue(error, [ <span class="hljs-built_in">Array</span>, [ <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-literal">null</span> ] ])
            }
        } <span class="hljs-keyword">catch</span> (error) {
            test.push(error)
        }
        okay(test, [ [ <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span> ] ], <span class="hljs-string">&#x27;mismatch an array exception by shallow compare&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> rescue(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>), [ <span class="hljs-built_in">Error</span> ], <span class="hljs-keyword">async</span> (e) =&gt; e.message)
        okay(result, <span class="hljs-string">&#x27;await async function&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> rescue(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>), [ <span class="hljs-built_in">Error</span> ], <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> e.message)
        okay(result, <span class="hljs-string">&#x27;away sync function as async&#x27;</span>)
    }
    {
        rescue(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Sought.Error
        }, [ Sought.Error ])
        okay(<span class="hljs-string">&#x27;rescued sync block&#x27;</span>)
    }
    {
        <span class="hljs-keyword">const</span> one = rescue(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
        }, [ Sought.Error ])
        okay(one, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;returned sync block&#x27;</span>)
    }
    {
        rescue(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Sought.Error
        }, [ Sought.Error ])
        okay(<span class="hljs-string">&#x27;rescued async block&#x27;</span>)
    }
})</pre></div></div>

        </li>

    </ul>
  </div>
</body>
</html>
